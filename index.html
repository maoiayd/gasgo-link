<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ ØºØ§Ø²</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, Tahoma;
  background: linear-gradient(135deg,#0f172a,#020617);
  color:white;
  text-align:center;
  padding:40px 15px;
}
.card{
  max-width:420px;
  margin:auto;
  background:#020617;
  border-radius:20px;
  padding:25px;
  box-shadow:0 15px 40px rgba(0,0,0,.6);
}
button{
  width:100%;
  padding:16px;
  font-size:20px;
  border:none;
  border-radius:12px;
  background:#22c55e;
  color:#000;
  cursor:pointer;
}
button:disabled{
  background:#555;
}
#status{
  margin-top:20px;
  font-size:16px;
}
</style>
</head>

<body>

<div class="card">
  <h2>ğŸ”¥ Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ ØºØ§Ø²</h2>
  <p>Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± ÙˆØ³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨</p>

  <button id="sendBtn" onclick="sendLocation()">ğŸ“ Ø¥Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø¢Ù†</button>

  <div id="status"></div>
</div>

<script>
const API_URL =
  "https://script.google.com/macros/s/AKfycbzsN3QngwrDEPApmAHJfBzOKLjFA4vWMi6tE3nu50vAtIzaIow7sl1DPER3pyLhqiQ/exec";

function sendLocation(){
  const btn = document.getElementById("sendBtn");
  const status = document.getElementById("status");

  btn.disabled = true;
  status.innerHTML = "â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ...";

  if(!navigator.geolocation){
    status.innerHTML = "âŒ Ø¬Ù‡Ø§Ø²Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹";
    btn.disabled = false;
    return;
  }

  navigator.geolocation.getCurrentPosition(
    function(position){
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;

      fetch(`${API_URL}?lat=${lat}&lng=${lng}`)
      .then(res => res.text())
      .then(() => {
        status.innerHTML =
          "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¨Ù†Ø¬Ø§Ø­<br>Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„ÙŠÙƒ";
      })
      .catch(() => {
        status.innerHTML = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„";
        btn.disabled = false;
      });
    },
    function(error){
      status.innerHTML = "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹";
      btn.disabled = false;
    }
  );
}
</script>

</body>
</html>
